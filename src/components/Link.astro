---
interface Props {
  href: string;
  icon?: boolean;
  class?: string;
  target?: string;
  rel?: string;
  [key: string]: any;
}

const {
  href,
  icon = true,
  class: className,
  target,
  rel,
  ...restProps
} = Astro.props;

const linkClasses = [
  "group inline-flex items-center gap-x-1 small-heading border-b-0",
  className,
]
  .filter(Boolean)
  .join(" ");

// Handle rel attribute for external links
let finalRel = rel;
if (target === "_blank" && !rel) {
  finalRel = "noopener noreferrer";
}
---

<a
  href={href}
  class={linkClasses}
  target={target}
  rel={finalRel}
  {...restProps}
>
  <span
    class="border-b-2 border-foreground/25 transition-colors group-hover:border-foreground/90"
  >
    <slot />
  </span>
  {
    icon && (
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="3"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="size-4 shrink-0 text-foreground/25 transition-colors group-hover:text-foreground/50"
        aria-hidden="true"
      >
        <path d="m9 18 6-6-6-6" />
      </svg>
    )
  }
</a>
